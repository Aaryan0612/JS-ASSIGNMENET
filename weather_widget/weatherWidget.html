<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather Widget</title>


    <style>
      .widget {
        width: 260px;
        padding: 15px;
        border-radius: 10px;
        background-color: #f2f2f2;
        font-family: Arial, sans-serif;
        text-align: center;
      }

      input {
        width: 90%;
        padding: 6px;
        margin-bottom: 8px;
      }

      button {
        padding: 6px 10px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <div class="widget">
      <h3>Weather Widget</h3>

      <input type="text" id="city" placeholder="Enter city" />
      <button onclick="loadWeather()">Check</button>

      <p id="result"></p>
    </div>

    <script>
      const apiKey = "cea3536c52f4fc9f8556021d7b03fe8a";

      async function loadWeather() {
        const cityName = document.getElementById("city").value;

        if (!cityName) {
          document.getElementById("result").innerText =
            "Please enter a city name";
          return;
        }

        try {
          // Step 1: Geocoding
          const geoRes = await fetch(
            `https://api.openweathermap.org/geo/1.0/direct?q=${cityName}&limit=1&appid=${apiKey}`,
          );
          const geoData = await geoRes.json();

          if (geoData.length === 0) {
            throw new Error("City not found");
          }

          const { lat, lon } = geoData[0];

          // Step 2: Weather
          const weatherRes = await fetch(
            `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`,
          );
          const weatherData = await weatherRes.json();

          document.getElementById("result").innerText =
            `Temperature in ${cityName}: ${weatherData.main.temp} Â°C`;
        } catch (error) {
          document.getElementById("result").innerText = error.message;
        }
      }
    </script>
  </body>
</html>
